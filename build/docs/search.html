<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta name="robots" content="noindex">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Search – GOV.UK design system prototypes</title>

    <!--[if gt IE 8]><!--><link href="/stylesheets/screen.css" rel="stylesheet" media="screen" /><!--<![endif]-->
    <!--[if lte IE 8]><link href="/stylesheets/screen-old-ie.css" rel="stylesheet" media="screen" /><![endif]-->

    <link rel="canonical" href="n/a/docs/search.html">

    <link href="/stylesheets/print.css" rel="stylesheet" media="print" />

  </head>

  <body class="blank">
    <div class="app-pane">

      <main id="content" class="technical-documentation markdown">
        <p><a href="/">⇠ Back</a></p>

<h1 id="search">Search</h1>

<p>Because we&rsquo;re currently using a static site generator there is no server side
application to execute the search. Instead we use a client side implementation
which downloads the <a href="/search.json">search index</a> and then the <a href="/javascripts/search.js">search logic</a> happens within
the browser.</p>

<p>We&rsquo;re using a middleman plugin called <a href="https://github.com/manastech/middleman-search#usage">middleman-search</a>, which is based on
<a href="http://lunrjs.com/">lunr.js</a>.</p>

<p>The index is built based on the config within the <code>activate :search</code> block in
<code>/config.rb</code>. The config allows you to include both fields from the YAML
frontmatter and the pattern&rsquo;s content itself, and for each of these define:</p>

<ul>
<li>the boost for that field (how highly a word should score based on the field it
appears in)</li>
<li>whether the field is used as part of the search index</li>
<li>whether the field is stored and made available when presenting results</li>
<li>whether the field is required (if it&rsquo;s missing the pattern will not be indexed)</li>
</ul>

<p>You can read more about this in the <a href="https://github.com/manastech/middleman-search#usage">middleman-search usage docs</a>.</p>

<h2 id="advantages-of-client-side-search">Advantages of client side search</h2>

<ul>
<li>Search is nearly instantaneous, with results being displayed in a list
similar to that in the <a href="https://github.com/alphagov/accessible-typeahead">accessible typeahead</a>.</li>
<li>Users can very quickly understand how the search behaves and match results
without necessarily having to complete their query terms.</li>
<li>Searching is very quick, as the index is built at compile time.</li>
<li>We don&rsquo;t need to worry about infrastructure for a server side application.</li>
</ul>

<h2 id="disadvantages-of-client-side-search">Disadvantages of client side search</h2>

<ul>
<li>The search functionality will not work if the user has Javascript disabled,
or Javascript fails to run.</li>
<li>The client has to download the search index on first run, and whenever the
index changes. The search index will likely be hundreds of kilobytes (though
this could be reduced and may be less when gzipped).</li>
</ul>

<h2 id="behaviour">Behaviour</h2>

<ul>
<li><a href="https://github.com/olivernn/lunr.js/blob/master/lib/stop_word_filter.js">Stop words</a> are not indexed and are removed from queries</li>
<li>Words are stemmed (English suffixes like &lsquo;ing&rsquo;, &#39;ed&rsquo;, &rsquo;s&rsquo; are removed) when
indexing and when running queries. This is so that e.g. &#39;validating forms&rsquo; would
find a document called &#39;Form Validation&rsquo;, but there is some potentially odd
behaviour when no results are found when the user has a query with a partial
stem – i.e. they&rsquo;ve got as far as writing &#39;form validatio&rsquo;.</li>
</ul>

      </main>

    </div>

  </body>
</html>
